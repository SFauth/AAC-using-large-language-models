#%% Analyze test...json file generated by evaluation.sh

import json
import pandas as pd
import glob
import plotly.express as px

if __name__ == '__main__':
    result_file = glob.glob('*.json')[0]
    f = open(result_file)
    data = json.load(f)
    data = pd.DataFrame.from_records(data)
    data_long = pd.melt(data, id_vars=["beta", "prompt", "alpha", "k", "decoding_len", "clip_text_max_len", "n_test_samples"])
    print(data_long)
    fig = px.scatter(data_long, x="beta", y="value", facet_col='prompt', color='variable')
    fig.write_html("results_test_run.html")

# header: include shared column information (k, alpha, ...)
# change to long format
# facet wrap prompt 
# jede linie andere Farbe metric
# x axis beta
# Alternativ: y axis every metric  (2 plots for every metric)
